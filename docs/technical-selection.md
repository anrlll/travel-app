# TravelApp æŠ€è¡“é¸å®šãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**ä½œæˆæ—¥**: 2025-10-13
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ç¢ºå®š
**å®Ÿè£…æº–å‚™å®Œäº†ç‡**: 96%

---

## ç›®æ¬¡

1. [æŠ€è¡“é¸å®šã®æ–¹é‡](#1-æŠ€è¡“é¸å®šã®æ–¹é‡)
2. [ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#2-ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
3. [ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#3-ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
4. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹](#4-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)
5. [ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤](#5-ã‚¤ãƒ³ãƒ•ãƒ©ãƒ‡ãƒ—ãƒ­ã‚¤)
6. [é–‹ç™ºãƒ„ãƒ¼ãƒ«](#6-é–‹ç™ºãƒ„ãƒ¼ãƒ«)
7. [å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹](#7-å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹)
8. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#8-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)
9. [ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»ãƒ­ã‚®ãƒ³ã‚°](#9-ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚®ãƒ³ã‚°)
10. [ä»£æ›¿æ¡ˆã¨æ¯”è¼ƒ](#10-ä»£æ›¿æ¡ˆã¨æ¯”è¼ƒ)

---

## 1. æŠ€è¡“é¸å®šã®æ–¹é‡

### 1.1 é¸å®šåŸºæº–

| åŸºæº– | é‡è¦åº¦ | èª¬æ˜ |
|------|--------|------|
| **å‹å®‰å…¨æ€§** | æœ€é«˜ | TypeScriptå®Œå…¨å¯¾å¿œã€å‹æ¨è«–ã®å¼·ã• |
| **å­¦ç¿’ã‚³ã‚¹ãƒˆ** | é«˜ | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå……å®Ÿåº¦ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚µã‚¤ã‚º |
| **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹** | é«˜ | åˆæœŸèª­ã¿è¾¼ã¿æ™‚é–“ã€APIå¿œç­”æ™‚é–“ |
| **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** | ä¸­ | Phase 2-3ã§ã®æ‹¡å¼µæ€§ |
| **ã‚³ã‚¹ãƒˆ** | é«˜ | Phase 1ç„¡æ–™ç¯„å›²ã§ã®é‹ç”¨å¯èƒ½æ€§ |
| **é–‹ç™ºé€Ÿåº¦** | é«˜ | ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆå‰Šæ¸›ã€DXå‘ä¸Š |

### 1.2 Phaseåˆ¥ã®è€ƒæ…®äº‹é …

**Phase 1ï¼ˆMVPï¼‰**:
- ç„¡æ–™æ ã§ã®é‹ç”¨å¯èƒ½æ€§
- å®Ÿè£…é€Ÿåº¦é‡è¦–
- ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆ

**Phase 2-3ï¼ˆæ‹¡å¼µï¼‰**:
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

---

## 2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 2.1 ã‚³ã‚¢æŠ€è¡“

#### âœ… React 18.3+
- **é¸å®šç†ç”±**:
  - æœ€å¤§ã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
  - Concurrent Featuresï¼ˆSuspenseã€Transitionsï¼‰
  - Server Componentsã®å°†æ¥çš„ãªå°å…¥å¯èƒ½æ€§
- **ä»£æ›¿æ¡ˆ**: Vue 3, Svelte
- **æ±ºå®š**: Reactï¼ˆè¦ä»¶å®šç¾©ã¨ã®ä¸€è²«æ€§ï¼‰

#### âœ… TypeScript 5.3+
- **é¸å®šç†ç”±**:
  - å‹å®‰å…¨æ€§ã«ã‚ˆã‚‹é–‹ç™ºåŠ¹ç‡å‘ä¸Š
  - IDEã‚µãƒãƒ¼ãƒˆï¼ˆIntelliSenseï¼‰
  - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®¹æ˜“æ€§
- **è¨­å®š**: `strict: true`ï¼ˆå³æ ¼ãƒ¢ãƒ¼ãƒ‰ï¼‰
- **æ±ºå®š**: TypeScriptå¿…é ˆ

#### âœ… Vite 5+
- **é¸å®šç†ç”±**:
  - é«˜é€Ÿãªé–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆCRAã®10å€ä»¥ä¸Šï¼‰
  - HMRï¼ˆHot Module Replacementï¼‰ãŒé«˜é€Ÿ
  - ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–ï¼ˆRollupä½¿ç”¨ï¼‰
- **ä»£æ›¿æ¡ˆ**: Create React Appï¼ˆéæ¨å¥¨ï¼‰ã€Next.js
- **æ±ºå®š**: Viteï¼ˆSSRä¸è¦ã®ãŸã‚ï¼‰

### 2.2 çŠ¶æ…‹ç®¡ç†

#### âœ… Zustand 4+
- **é¸å®šç†ç”±**:
  - Reduxæ¯”ã§80%å°‘ãªã„ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆ
  - TypeScriptå®Œå…¨ã‚µãƒãƒ¼ãƒˆ
  - DevToolsã‚µãƒãƒ¼ãƒˆ
  - å­¦ç¿’ã‚³ã‚¹ãƒˆä½
  ```typescript
  // ä¾‹: ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¹ãƒˆã‚¢å®šç¾©
  const useTripStore = create<TripStore>((set) => ({
    trips: [],
    addTrip: (trip) => set((state) => ({ trips: [...state.trips, trip] })),
  }));
  ```
- **ä»£æ›¿æ¡ˆ**: Redux Toolkit, Jotai, Recoil
- **æ±ºå®š**: Zustandï¼ˆã‚·ãƒ³ãƒ—ãƒ«ã•å„ªå…ˆï¼‰

#### âœ… TanStack Query (React Query) 5+
- **é¸å®šç†ç”±**:
  - ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†ã«ç‰¹åŒ–
  - è‡ªå‹•ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ãƒ»å†å–å¾—
  - æ¥½è¦³çš„æ›´æ–°ã‚µãƒãƒ¼ãƒˆ
  - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
- **è¨­å®šä¾‹**:
  ```typescript
  const { data, isLoading } = useQuery({
    queryKey: ['trips'],
    queryFn: fetchTrips,
    staleTime: 5 * 60 * 1000, // 5åˆ†
  });
  ```
- **æ±ºå®š**: TanStack Queryå¿…é ˆ

### 2.3 UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª

#### âœ… Tailwind CSS 3.4+
- **é¸å®šç†ç”±**:
  - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã§é«˜é€Ÿé–‹ç™º
  - ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºæœ€å°åŒ–ï¼ˆPurgeCSSï¼‰
  - ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå®¹æ˜“
- **è¨­å®š**: JITï¼ˆJust-In-Timeï¼‰ãƒ¢ãƒ¼ãƒ‰
- **æ±ºå®š**: Tailwind CSS

#### âœ… shadcn/ui
- **é¸å®šç†ç”±**:
  - ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆå‹ï¼ˆä¾å­˜é–¢ä¿‚ãªã—ï¼‰
  - Radix UIãƒ™ãƒ¼ã‚¹ï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œï¼‰
  - ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå®Œå…¨è‡ªç”±
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹**:
  - Button, Dialog, Sheet, Toast, Form, Select
- **ä»£æ›¿æ¡ˆ**: Material-UI, Ant Design, Chakra UI
- **æ±ºå®š**: shadcn/uiï¼ˆæŸ”è»Ÿæ€§å„ªå…ˆï¼‰

### 2.4 ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### âœ… React Router v6.22+
- **é¸å®šç†ç”±**:
  - æ¨™æº–çš„ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
  - Data APIï¼ˆloader/actionï¼‰ã‚µãƒãƒ¼ãƒˆ
  - TypeScriptå®Œå…¨å¯¾å¿œ
- **è¨­å®šä¾‹**:
  ```typescript
  const router = createBrowserRouter([
    {
      path: "/trips",
      element: <TripsPage />,
      loader: tripsLoader,
    },
  ]);
  ```
- **æ±ºå®š**: React Router v6

### 2.5 ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†

#### âœ… React Hook Form 7.50+
- **é¸å®šç†ç”±**:
  - æœ€å°ã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
  - Zodã¨ã®é€£æºãŒå®¹æ˜“
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å„ªç§€ï¼ˆFormikæ¯”ã§2-3å€é«˜é€Ÿï¼‰
- **æ±ºå®š**: React Hook Form

#### âœ… Zod 3.22+
- **é¸å®šç†ç”±**:
  - TypeScript-first
  - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§å…±é€šã‚¹ã‚­ãƒ¼ãƒä½¿ç”¨å¯èƒ½
  - è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **è¨­å®šä¾‹**:
  ```typescript
  const tripSchema = z.object({
    title: z.string().min(1).max(255),
    destinations: z.array(z.string()).min(1),
    startDate: z.date(),
  });
  ```
- **æ±ºå®š**: Zodå¿…é ˆ

### 2.6 ãã®ä»–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

| ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|-----------|----------|------|
| **Axios** | 1.6+ | HTTPé€šä¿¡ |
| **date-fns** | 3.0+ | æ—¥ä»˜å‡¦ç† |
| **Leaflet** | 1.9+ | åœ°å›³è¡¨ç¤º |
| **react-leaflet** | 4.2+ | Reactçµ±åˆ |
| **react-i18next** | 14.0+ | å›½éš›åŒ– |
| **react-window** | 1.8+ | ä»®æƒ³åŒ–ï¼ˆã‚­ãƒ£ãƒ³ãƒã‚¹æ©Ÿèƒ½ï¼‰ |
| **recharts** | 2.10+ | ã‚°ãƒ©ãƒ•è¡¨ç¤ºï¼ˆäºˆç®—ç®¡ç†ï¼‰ |

---

## 3. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 3.1 Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

#### âœ… Fastify 4.26+ï¼ˆæ¨å¥¨ï¼‰
- **é¸å®šç†ç”±**:
  - Expressæ¯”ã§2-3å€ã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ
  - TypeScriptå®Œå…¨å¯¾å¿œ
  - ã‚¹ã‚­ãƒ¼ãƒãƒ™ãƒ¼ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å†…è”µ
  - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å……å®Ÿ
- **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³**:
  - `@fastify/jwt` - JWTèªè¨¼
  - `@fastify/cors` - CORSè¨­å®š
  - `@fastify/helmet` - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼
  - `@fastify/swagger` - APIä»•æ§˜æ›¸ç”Ÿæˆ
- **è¨­å®šä¾‹**:
  ```typescript
  const fastify = Fastify({
    logger: true,
    ajv: {
      customOptions: { removeAdditional: 'all' },
    },
  });
  ```

#### ä»£æ›¿æ¡ˆ: Express.js 4.18+
- **ãƒ¡ãƒªãƒƒãƒˆ**: æœ€å¤§ã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã€è±Šå¯Œãªæƒ…å ±
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£ã‚‹ã€TypeScriptå¯¾å¿œãŒå¼±ã„
- **çµè«–**: Phase 1ã§ã‚‚**Fastifyæ¨å¥¨**ï¼ˆå°†æ¥æ€§è€ƒæ…®ï¼‰

### 3.2 ORM

#### âœ… Prisma 5.10+
- **é¸å®šç†ç”±**:
  - TypeScript-firstã€å‹å®‰å…¨
  - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†ãŒå®¹æ˜“
  - Prisma Studioã§è¦–è¦šçš„DBç®¡ç†
  - N+1å•é¡Œã®è‡ªå‹•è§£æ±º
- **æ©Ÿèƒ½**:
  - Prisma Migrateï¼ˆãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
  - Prisma Clientï¼ˆã‚¯ã‚¨ãƒªãƒ“ãƒ«ãƒ€ãƒ¼ï¼‰
  - Prisma Studioï¼ˆGUIï¼‰
- **è¨­å®šä¾‹**:
  ```prisma
  datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
  }

  generator client {
    provider = "prisma-client-js"
  }
  ```
- **ä»£æ›¿æ¡ˆ**: TypeORM, Drizzle ORM
- **æ±ºå®š**: Prismaï¼ˆé–‹ç™ºä½“é¨“å„ªå…ˆï¼‰

### 3.3 èªè¨¼

#### âœ… JWT + ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼‰
- **å®Ÿè£…**:
  - `jsonwebtoken` 9.0+ ã¾ãŸã¯ `@fastify/jwt`
  - `bcrypt` 5.1+ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ï¼‰
- **è¨­å®š**:
  ```typescript
  const jwtConfig = {
    accessToken: {
      secret: process.env.JWT_SECRET,
      expiresIn: '15m',
    },
    refreshToken: {
      expiresIn: '7d',
    },
  };
  ```
- **æ±ºå®š**: 05-authentication.mdä»•æ§˜ã«æº–æ‹ 

### 3.4 ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

#### âœ… Zod 3.22+ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨å…±é€šï¼‰
- **é¸å®šç†ç”±**:
  - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§åŒä¸€ã‚¹ã‚­ãƒ¼ãƒ
  - å‹æ¨è«–ãŒå¼·åŠ›
- **ä½¿ç”¨ä¾‹**:
  ```typescript
  // shared/schemas/trip.schema.ts
  export const createTripSchema = z.object({
    title: z.string().min(1).max(255),
    destinations: z.array(z.string()).min(1),
  });

  // backendä½¿ç”¨
  const data = createTripSchema.parse(req.body);
  ```

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

### 4.1 RDBMS

#### âœ… PostgreSQL 15+
- **é¸å®šç†ç”±**:
  - JSONBå‹ã‚µãƒãƒ¼ãƒˆï¼ˆdestinations, custom_locationï¼‰
  - GINã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§é«˜é€ŸJSONBæ¤œç´¢
  - éƒ¨åˆ†UNIQUEåˆ¶ç´„ã‚µãƒãƒ¼ãƒˆ
  - ä¿¡é ¼æ€§ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **å¿…é ˆæ©Ÿèƒ½**:
  - JSONBå‹ï¼ˆè¤‡æ•°ç›®çš„åœ°å¯¾å¿œï¼‰
  - GINã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  - éƒ¨åˆ†UNIQUEåˆ¶ç´„ï¼ˆWHEREå¥ä»˜ãï¼‰
- **æ±ºå®š**: PostgreSQL 15+å¿…é ˆ

### 4.2 ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°

#### âœ… VPSä¸Šã«PostgreSQLç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰
- **é¸å®šç†ç”±**:
  - VPSã¨åŒä¸€ã‚µãƒ¼ãƒãƒ¼ã§å®Œçµï¼ˆãƒ¬ã‚¤ãƒ†ãƒ³ã‚·æœ€å°ï¼‰
  - ã‚³ã‚¹ãƒˆè¿½åŠ ãªã—ï¼ˆVPSæ–™é‡‘ã«å«ã¾ã‚Œã‚‹ï¼‰
  - å®Œå…¨ãªç®¡ç†æ¨©é™
  - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥ã‚’è‡ªç”±ã«è¨­å®šå¯èƒ½
- **è¨­å®š**:
  ```bash
  # PostgreSQL 15ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  sudo apt update
  sudo apt install postgresql-15 postgresql-contrib

  # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ
  sudo -u postgres psql
  CREATE DATABASE travelapp;
  CREATE USER travelapp_user WITH PASSWORD 'your-password';
  GRANT ALL PRIVILEGES ON DATABASE travelapp TO travelapp_user;
  \q
  ```
- **æ–™é‡‘**: VPSæ–™é‡‘ã«å«ã¾ã‚Œã‚‹ï¼ˆè¿½åŠ ã‚³ã‚¹ãƒˆãªã—ï¼‰
- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: pg_dump + cronï¼ˆæ—¥æ¬¡è‡ªå‹•ï¼‰

#### ä»£æ›¿æ¡ˆ: Supabaseï¼ˆå¤–éƒ¨ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼‰
- **ãƒ¡ãƒªãƒƒãƒˆ**: ç®¡ç†ä¸è¦ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: è¿½åŠ ã‚³ã‚¹ãƒˆã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·å¢—åŠ ã€ãƒ‡ãƒ¼ã‚¿è»¢é€åˆ¶é™
- **æ–™é‡‘**: Phase 1ç„¡æ–™ï¼ˆ500MBï¼‰ã€Phase 2 $25/æœˆ

#### ä»£æ›¿æ¡ˆ: Neonï¼ˆå¤–éƒ¨ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼‰
- **ãƒ¡ãƒªãƒƒãƒˆ**: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã€è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: è¿½åŠ ã‚³ã‚¹ãƒˆã€VPSã¨ã®é€šä¿¡ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰
- **æ–™é‡‘**: Phase 1ç„¡æ–™ï¼ˆ3GBï¼‰ã€Phase 2 $19/æœˆ

**æ±ºå®š**: **VPSä¸Šã«ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**ï¼ˆã‚³ã‚¹ãƒˆãƒ»ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·æœ€é©åŒ–ï¼‰

---

## 5. ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤

### 5.1 ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹å¼ã®é¸æŠ

#### ğŸ¯ å›½ç”£VPSæ§‹æˆï¼ˆæ¨å¥¨ï¼‰

å›½ç”£VPSã§ã®ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚’å‰æã¨ã—ãŸæ§‹æˆã«å¤‰æ›´ã—ã¾ã™ã€‚

**å¯¾è±¡VPSå€™è£œ**:
- **ConoHa VPS**: æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã€é«˜é€ŸSSD
- **ã•ãã‚‰ã®VPS**: å®‰å®šæ€§é‡è¦–ã€ã‚µãƒãƒ¼ãƒˆå……å®Ÿ
- **Kagoya CLOUD VPS**: é«˜æ€§èƒ½ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«

### 5.2 VPSæ§‹æˆï¼ˆæ¨å¥¨ã‚¹ãƒšãƒƒã‚¯ï¼‰

#### Phase 1ï¼ˆMVPï¼‰æœ€å°æ§‹æˆ
```
ãƒ—ãƒ©ãƒ³: 2GB RAM / 2vCPU / 100GB SSD
æ–™é‡‘: ç´„1,000-1,500å††/æœˆ
OS: Ubuntu 22.04 LTS
```

#### Phase 2-3ï¼ˆæœ¬ç•ªé‹ç”¨ï¼‰
```
ãƒ—ãƒ©ãƒ³: 4GB RAM / 3vCPU / 200GB SSD
æ–™é‡‘: ç´„2,000-3,000å††/æœˆ
OS: Ubuntu 22.04 LTS
```

### 5.3 VPSä¸Šã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
[VPS Server (Ubuntu 22.04)]
â”œâ”€â”€ Nginx (Reverse Proxy & Static File Serving)
â”‚   â”œâ”€â”€ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰: Port 80/443 â†’ /var/www/travelapp
â”‚   â””â”€â”€ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API: Port 80/443 â†’ Proxy to localhost:3000
â”œâ”€â”€ Node.js 20 LTS
â”‚   â””â”€â”€ Fastify App: Port 3000
â”œâ”€â”€ PostgreSQL 15
â”‚   â””â”€â”€ Port 5432 (localhost only)
â”œâ”€â”€ PM2 (Process Manager)
â”‚   â””â”€â”€ Fastify Appè‡ªå‹•å†èµ·å‹•ãƒ»ç›£è¦–
â””â”€â”€ Certbot (SSL/TLS)
    â””â”€â”€ Let's Encryptè‡ªå‹•æ›´æ–°
```

### 5.4 å¿…é ˆãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãƒ»ãƒ„ãƒ¼ãƒ«

#### âœ… Nginx 1.24+
- **ç”¨é€”**: ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã€é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡ã€SSLçµ‚ç«¯
- **è¨­å®šä¾‹**:
  ```nginx
  # /etc/nginx/sites-available/travelapp
  server {
    listen 80;
    server_name your-domain.com;
    return 301 https://$server_name$request_uri;
  }

  server {
    listen 443 ssl http2;
    server_name your-domain.com;

    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;

    # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
    location / {
      root /var/www/travelapp/dist;
      try_files $uri $uri/ /index.html;

      # ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š
      expires 7d;
      add_header Cache-Control "public, immutable";
    }

    # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API
    location /api {
      proxy_pass http://localhost:3000;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto $scheme;
    }
  }
  ```

#### âœ… PM2 5+
- **ç”¨é€”**: Node.jsãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ã€è‡ªå‹•å†èµ·å‹•ã€ç›£è¦–
- **è¨­å®šä¾‹**:
  ```javascript
  // ecosystem.config.js
  module.exports = {
    apps: [{
      name: 'travelapp-api',
      script: './dist/server.js',
      instances: 'max', // CPUã‚³ã‚¢æ•°åˆ†ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹èµ·å‹•
      exec_mode: 'cluster',
      env: {
        NODE_ENV: 'production',
        PORT: 3000
      },
      error_file: '/var/log/pm2/travelapp-error.log',
      out_file: '/var/log/pm2/travelapp-out.log',
      log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
      merge_logs: true,
      max_memory_restart: '1G',
      autorestart: true,
      watch: false
    }]
  };
  ```
- **èµ·å‹•ã‚³ãƒãƒ³ãƒ‰**:
  ```bash
  pm2 start ecosystem.config.js
  pm2 save
  pm2 startup # ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•æ™‚ã«è‡ªå‹•èµ·å‹•
  ```

#### âœ… PostgreSQL 15
- **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**: VPSä¸Šã«ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- **è¨­å®š**:
  ```bash
  # /etc/postgresql/15/main/postgresql.conf
  max_connections = 100
  shared_buffers = 512MB  # RAM 2GBã®å ´åˆ
  effective_cache_size = 1536MB
  maintenance_work_mem = 128MB

  # ãƒ­ã‚°è¨­å®š
  log_directory = '/var/log/postgresql'
  log_filename = 'postgresql-%Y-%m-%d.log'
  log_rotation_age = 7d
  ```
- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**:
  ```bash
  # æ—¥æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  #!/bin/bash
  # /usr/local/bin/backup-db.sh
  pg_dump travelapp | gzip > /backup/travelapp-$(date +%Y%m%d).sql.gz
  # 7æ—¥ä»¥ä¸Šå‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å‰Šé™¤
  find /backup -name "travelapp-*.sql.gz" -mtime +7 -delete

  # crontabã«ç™»éŒ²
  # 0 3 * * * /usr/local/bin/backup-db.sh
  ```

#### âœ… Certbotï¼ˆLet's Encryptï¼‰
- **ç”¨é€”**: SSL/TLSè¨¼æ˜æ›¸è‡ªå‹•å–å¾—ãƒ»æ›´æ–°
- **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**:
  ```bash
  sudo apt install certbot python3-certbot-nginx
  sudo certbot --nginx -d your-domain.com
  ```
- **è‡ªå‹•æ›´æ–°**: cronã§è‡ªå‹•è¨­å®šæ¸ˆã¿

### 5.5 ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼

#### æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆPhase 1ï¼‰
```bash
# 1. VPSã«SSHæ¥ç¶š
ssh user@your-vps-ip

# 2. ãƒªãƒã‚¸ãƒˆãƒªæ›´æ–°
cd /opt/travelapp
git pull origin main

# 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰
cd frontend
npm ci
npm run build
sudo cp -r dist/* /var/www/travelapp/

# 4. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰
cd ../backend
npm ci
npm run build

# 5. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
npx prisma migrate deploy

# 6. PM2å†èµ·å‹•
pm2 reload travelapp-api

# 7. Nginxè¨­å®šãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
sudo nginx -t && sudo nginx -s reload
```

#### GitHub Actionsè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆPhase 2+ï¼‰
```yaml
# .github/workflows/deploy.yml
name: Deploy to VPS

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Deploy to VPS
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.VPS_HOST }}
          username: ${{ secrets.VPS_USERNAME }}
          key: ${{ secrets.VPS_SSH_KEY }}
          script: |
            cd /opt/travelapp
            git pull origin main
            cd frontend && npm ci && npm run build
            sudo cp -r dist/* /var/www/travelapp/
            cd ../backend && npm ci && npm run build
            npx prisma migrate deploy
            pm2 reload travelapp-api
```

### 5.6 ç›£è¦–ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

#### ãƒ­ã‚°ç®¡ç†
```bash
# PM2ãƒ­ã‚°ç¢ºèª
pm2 logs travelapp-api

# Nginxãƒ­ã‚°ç¢ºèª
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log

# PostgreSQLãƒ­ã‚°ç¢ºèª
sudo tail -f /var/log/postgresql/postgresql-*.log
```

#### ãƒªã‚½ãƒ¼ã‚¹ç›£è¦–
```bash
# PM2ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
pm2 monit

# ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹
htop

# ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡
df -h

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µã‚¤ã‚º
sudo -u postgres psql -c "SELECT pg_size_pretty(pg_database_size('travelapp'));"
```

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–
- **ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ï¼ˆUFWï¼‰**:
  ```bash
  sudo ufw default deny incoming
  sudo ufw default allow outgoing
  sudo ufw allow 22/tcp      # SSH
  sudo ufw allow 80/tcp      # HTTP
  sudo ufw allow 443/tcp     # HTTPS
  sudo ufw enable
  ```
- **fail2ban**: SSH brute-forceæ”»æ’ƒå¯¾ç­–
- **è‡ªå‹•ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ**:
  ```bash
  sudo apt install unattended-upgrades
  sudo dpkg-reconfigure -plow unattended-upgrades
  ```

### 5.7 VPS vs PaaS æ¯”è¼ƒ

| é …ç›® | VPSï¼ˆå›½ç”£ï¼‰ | PaaSï¼ˆVercel/Renderï¼‰ |
|-----|------------|---------------------|
| **æœˆé¡ã‚³ã‚¹ãƒˆ** | 1,000-3,000å†† | Phase 1: $0ã€Phase 2: $32+ |
| **åˆæœŸè¨­å®š** | è¤‡é›‘ï¼ˆLinuxçŸ¥è­˜å¿…è¦ï¼‰ | ç°¡å˜ï¼ˆGUIæ“ä½œï¼‰ |
| **é‹ç”¨è² è·** | é«˜ï¼ˆãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å¿…è¦ï¼‰ | ä½ï¼ˆè‡ªå‹•ç®¡ç†ï¼‰ |
| **æŸ”è»Ÿæ€§** | é«˜ï¼ˆè‡ªç”±ã«æ§‹æˆå¯èƒ½ï¼‰ | ä¸­ï¼ˆåˆ¶é™ã‚ã‚Šï¼‰ |
| **ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³** | æ—¥æœ¬å›½å†… | æµ·å¤–ï¼ˆä¸»ã«ç±³å›½ï¼‰ |
| **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·** | ä½ï¼ˆæ—¥æœ¬ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼‰ | ã‚„ã‚„é«˜ |
| **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** | æ‰‹å‹• | è‡ªå‹• |

**æ±ºå®š**: **å›½ç”£VPS**ï¼ˆã‚³ã‚¹ãƒˆãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³é‡è¦–ï¼‰

### 5.3 ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

#### Phase 1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆBase64ï¼‰
- **é¸å®šç†ç”±**: å®Ÿè£…ã‚·ãƒ³ãƒ—ãƒ«ã€ã‚³ã‚¹ãƒˆ0å††
- **åˆ¶é™**: 10GBåˆ°é”æ™‚ã«Phase 2ç§»è¡Œ

#### Phase 2+: âœ… Cloudflare R2ï¼ˆæ¨å¥¨ï¼‰
- **é¸å®šç†ç”±**:
  - S3äº’æ›API
  - ã‚¨ã‚°ãƒ¬ã‚¹æ–™é‡‘ãªã—
  - ä½ã‚³ã‚¹ãƒˆï¼ˆ$0.015/GB/æœˆï¼‰
- **ç„¡æ–™æ **: 10GBä¿å­˜ã€1,000ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æœˆ
- **æ–™é‡‘**: Phase 2ã§$3-5/æœˆç¨‹åº¦
- **URL**: https://www.cloudflare.com/products/r2/

#### ä»£æ›¿æ¡ˆ: Cloudinary
- **ãƒ¡ãƒªãƒƒãƒˆ**: ç”»åƒå¤‰æ›ãƒ»æœ€é©åŒ–è‡ªå‹•
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: é«˜ã‚³ã‚¹ãƒˆ
- **æ–™é‡‘**: $89/æœˆã€œ

**æ±ºå®š**: **Cloudflare R2**ï¼ˆã‚³ã‚¹ãƒˆå„ªå…ˆï¼‰

---

## 6. é–‹ç™ºãƒ„ãƒ¼ãƒ«

### 6.1 ã‚³ãƒ¼ãƒ‰å“è³ª

#### âœ… ESLint 8+
- **ãƒ—ãƒªã‚»ãƒƒãƒˆ**: `eslint-config-airbnb-typescript`
- **ãƒ«ãƒ¼ãƒ«**:
  ```json
  {
    "extends": ["airbnb-typescript", "prettier"],
    "rules": {
      "react/react-in-jsx-scope": "off",
      "import/prefer-default-export": "off"
    }
  }
  ```

#### âœ… Prettier 3+
- **è¨­å®š**:
  ```json
  {
    "semi": true,
    "singleQuote": true,
    "tabWidth": 2,
    "trailingComma": "es5"
  }
  ```

#### âœ… Husky + lint-staged
- **ç”¨é€”**: ã‚³ãƒŸãƒƒãƒˆå‰ã®ãƒªãƒ³ãƒˆãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè‡ªå‹•å®Ÿè¡Œ
- **è¨­å®š**:
  ```json
  {
    "*.{ts,tsx}": ["eslint --fix", "prettier --write"]
  }
  ```

### 6.2 ãƒ†ã‚¹ãƒˆ

#### âœ… Vitest 1.3+ï¼ˆãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼‰
- **é¸å®šç†ç”±**:
  - Viteãƒã‚¤ãƒ†ã‚£ãƒ–ã€é«˜é€Ÿ
  - Jestäº’æ›API
  - TypeScriptå®Œå…¨å¯¾å¿œ
- **ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™**: 80%ä»¥ä¸Š

#### âœ… React Testing Library 14+
- **é¸å®šç†ç”±**: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã®ãƒ†ã‚¹ãƒˆ
- **è¨­å®š**: `@testing-library/react`, `@testing-library/jest-dom`

#### âœ… Playwright 1.42+ï¼ˆE2Eãƒ†ã‚¹ãƒˆï¼‰
- **é¸å®šç†ç”±**:
  - ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ
  - ä¸¦åˆ—å®Ÿè¡Œ
  - TypeScriptå®Œå…¨å¯¾å¿œ
- **å¯¾è±¡ãƒ–ãƒ©ã‚¦ã‚¶**: Chromium, Firefox, WebKit

### 6.3 ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤

#### âœ… GitHub Actions
- **ç”¨é€”**: CI/CDè‡ªå‹•åŒ–
- **ãƒ•ãƒ­ãƒ¼**:
  1. Lintãƒ»Testå®Ÿè¡Œ
  2. ãƒ“ãƒ«ãƒ‰
  3. VPSã¸è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆSSHçµŒç”±ï¼‰
- **è¨­å®šä¾‹**:
  ```yaml
  name: CI/CD
  on:
    push:
      branches: [main]
  jobs:
    test:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v3
        - run: npm ci
        - run: npm run lint
        - run: npm run test

    deploy:
      needs: test
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v3
        - name: Deploy to VPS
          uses: appleboy/ssh-action@master
          with:
            host: ${{ secrets.VPS_HOST }}
            username: ${{ secrets.VPS_USER }}
            key: ${{ secrets.VPS_SSH_KEY }}
            script: |
              cd /var/www/travelapp
              git pull origin main
              npm ci
              npm run build
              pm2 reload ecosystem.config.js
  ```

---

## 7. å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹

### 7.1 APIä¸€è¦§

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | ç„¡æ–™æ  | Phase 1ã‚³ã‚¹ãƒˆ |
|---------|------|--------|--------------|
| **OpenStreetMap** | åœ°å›³è¡¨ç¤º | ç„¡åˆ¶é™ | $0 |
| **Leaflet** | åœ°å›³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | ç„¡åˆ¶é™ | $0 |
| **OpenWeatherMap** | å¤©æ°—æƒ…å ± | 1,000å›/æ—¥ | $0 |
| **OpenTripMap** | è¦³å…‰åœ°æƒ…å ± | 1,000å›/æ—¥ | $0 |
| **Foursquare Places** | ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³æƒ…å ± | 999å›/æ—¥ | $0 |
| **Cloudflare R2** | ç”»åƒä¿å­˜ï¼ˆPhase 2+ï¼‰ | 10GB, 1,000ä¸‡req/æœˆ | $0-3 |
| **Resend** | ãƒ¡ãƒ¼ãƒ«é€ä¿¡ | 100é€š/æ—¥ | $0 |

**Phase 1ç·ã‚³ã‚¹ãƒˆ**: **$0/æœˆ**
**Phase 2ç·ã‚³ã‚¹ãƒˆ**: **$3-5/æœˆ** (Cloudflare R2ã®ã¿)

### 7.2 APIã‚­ãƒ¼ç®¡ç†

- **æ–¹æ³•**: ç’°å¢ƒå¤‰æ•°ï¼ˆ`.env`ï¼‰
- **æœ¬ç•ª**: VPSä¸Šã®`.env`ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ/var/www/travelapp/.envï¼‰
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**:
  - `.env`ã‚’Gitã«å«ã‚ãªã„ã€`.env.example`æä¾›
  - VPSä¸Šã®`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã¯600æ¨©é™ï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰
  ```bash
  chmod 600 /var/www/travelapp/.env
  chown deploy:deploy /var/www/travelapp/.env
  ```

---

## 8. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### 8.1 èªè¨¼ãƒ»èªå¯

- **JWT**: `HS256`ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥**: bcryptï¼ˆcost factor 10ï¼‰
- **HTTPS**: å¿…é ˆï¼ˆCertbot + Let's Encryptè‡ªå‹•æ›´æ–°ï¼‰
- **CORS**: ã‚ªãƒªã‚¸ãƒ³åˆ¶é™ï¼ˆVPSä¸Šã®Nginxã§è¨­å®šï¼‰
- **Rate Limiting**: Fastify rate-limit + Nginx limit_req

### 8.2 å…¥åŠ›æ¤œè¨¼

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Zod
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Zodï¼ˆäºŒé‡æ¤œè¨¼ï¼‰
- **SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–**: Prismaã§è‡ªå‹•é˜²å¾¡

### 8.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼

```typescript
// @fastify/helmetä½¿ç”¨
fastify.register(helmet, {
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'"],
    },
  },
});
```

---

## 9. ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»ãƒ­ã‚®ãƒ³ã‚°

### 9.1 Phase 1ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ï¼‰

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Fastify loggerï¼ˆpinoï¼‰ â†’ VPSä¸Šã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
  ```bash
  # PM2ãƒ­ã‚°ç¢ºèª
  pm2 logs travelapp
  # ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
  pm2 install pm2-logrotate
  ```
- **Nginx ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°**: `/var/log/nginx/access.log`
- **PostgreSQL ãƒ­ã‚°**: `/var/log/postgresql/postgresql-15-main.log`
- **ã‚¨ãƒ©ãƒ¼è¿½è·¡**: ãªã—ï¼ˆæ‰‹å‹•ç¢ºèªï¼‰

### 9.2 Phase 2+ï¼ˆæœ¬æ ¼å°å…¥ï¼‰

#### Sentryï¼ˆã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ï¼‰
- **ç„¡æ–™æ **: 5,000ã‚¤ãƒ™ãƒ³ãƒˆ/æœˆ
- **æ–™é‡‘**: $26/æœˆã€œ

#### Grafana + Prometheusï¼ˆVPSç›£è¦–ï¼‰
- **ç„¡æ–™**: ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹
- **ç›£è¦–é …ç›®**: CPUã€ãƒ¡ãƒ¢ãƒªã€ãƒ‡ã‚£ã‚¹ã‚¯ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€DBæ¥ç¶šæ•°
- **ã‚¢ãƒ©ãƒ¼ãƒˆ**: ãƒ¡ãƒ¼ãƒ«/Slacké€šçŸ¥

---

## 10. ä»£æ›¿æ¡ˆã¨æ¯”è¼ƒ

### 10.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| é …ç›® | é¸å®š | ä»£æ›¿æ¡ˆ | é¸å®šç†ç”± |
|-----|------|--------|---------|
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | React | Vue, Svelte | ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã€è¦ä»¶å®šç¾©ã¨ã®ä¸€è²«æ€§ |
| ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« | Vite | Next.js | SSRä¸è¦ã€é«˜é€ŸHMR |
| çŠ¶æ…‹ç®¡ç† | Zustand | Redux Toolkit | ã‚·ãƒ³ãƒ—ãƒ«ã•ã€å­¦ç¿’ã‚³ã‚¹ãƒˆä½ |
| UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª | shadcn/ui | MUI, Ant Design | ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè‡ªç”±åº¦ |

### 10.2 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| é …ç›® | é¸å®š | ä»£æ›¿æ¡ˆ | é¸å®šç†ç”± |
|-----|------|--------|---------|
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Fastify | Express, NestJS | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€TypeScriptå¯¾å¿œ |
| ORM | Prisma | TypeORM, Drizzle | é–‹ç™ºä½“é¨“ã€å‹å®‰å…¨æ€§ |
| DB | PostgreSQL | MySQL, MongoDB | JSONBå‹ã€éƒ¨åˆ†UNIQUEåˆ¶ç´„ |
| ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | Render | Railway, Fly.io | ç„¡æ–™æ ã€ã‚·ãƒ³ãƒ—ãƒ«ã• |

### 10.3 ã‚¤ãƒ³ãƒ•ãƒ©

| é …ç›® | é¸å®š | ä»£æ›¿æ¡ˆ | é¸å®šç†ç”± |
|-----|------|--------|---------|
| ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | **å›½ç”£VPS** | Vercel + Renderï¼ˆPaaSï¼‰ | ã‚³ã‚¹ãƒˆã€ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€æŸ”è»Ÿæ€§ |
| OS | Ubuntu 22.04 LTS | Debian, CentOS | å®‰å®šæ€§ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå……å®Ÿ |
| Webã‚µãƒ¼ãƒãƒ¼ | Nginx | Apache | é«˜é€Ÿã€ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·æ©Ÿèƒ½ |
| ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç† | PM2 | systemd | è‡ªå‹•å†èµ·å‹•ã€ãƒ­ã‚°ç®¡ç† |
| DB | PostgreSQL 15ï¼ˆVPSï¼‰ | Supabaseï¼ˆå¤–éƒ¨ï¼‰ | ã‚³ã‚¹ãƒˆå‰Šæ¸›ã€ãƒ‡ãƒ¼ã‚¿ç®¡ç†çµ±ä¸€ |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | Cloudflare R2 | VPSç›´æ¥ä¿å­˜ | ã‚³ã‚¹ãƒˆï¼ˆã‚¨ã‚°ãƒ¬ã‚¹ç„¡æ–™ï¼‰ã€CDNæ©Ÿèƒ½ |

---

## ã¾ã¨ã‚

### Phase 1ï¼ˆMVPï¼‰æœ€å°æ§‹æˆ

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**:
```
React 18 + TypeScript 5 + Vite 5
Zustand + TanStack Query
Tailwind CSS + shadcn/ui
React Router v6 + React Hook Form + Zod
react-i18next (å›½éš›åŒ–)
```

**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**:
```
Fastify 4 + TypeScript 5
Prisma 5 + PostgreSQL 15
JWT + bcrypt
Zodï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
```

**ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆVPSæ§‹æˆï¼‰**:
```
å›½ç”£VPSï¼ˆConoHa/ã•ãã‚‰VPSç­‰ï¼‰
â”œâ”€â”€ Ubuntu 22.04 LTS
â”œâ”€â”€ Nginx 1.24+ï¼ˆãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚· + é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡ï¼‰
â”œâ”€â”€ PM2 5+ï¼ˆãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ï¼‰
â”œâ”€â”€ PostgreSQL 15ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰
â”œâ”€â”€ Node.js 20 LTS
â”œâ”€â”€ Certbotï¼ˆSSL/TLSè‡ªå‹•æ›´æ–°ï¼‰
â””â”€â”€ Cloudflare R2ï¼ˆPhase 2+ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰
```

**æ¨å¥¨VPSã‚¹ãƒšãƒƒã‚¯**:
- **Phase 1**: 2GB RAM / 2 CPU / 50GB SSD
- **Phase 2-3**: 4GB RAM / 3 CPU / 100GB SSD

**Phase 1ç·ã‚³ã‚¹ãƒˆ**:
- **VPS**: 1,000-1,500å††/æœˆï¼ˆConoHa VPS 2GBã€ã•ãã‚‰VPS 2GBãªã©ï¼‰
- **å¤–éƒ¨API**: 0å††/æœˆï¼ˆå…¨ã¦ç„¡æ–™æ å†…ï¼‰
- **åˆè¨ˆ**: **1,000-1,500å††/æœˆ** ğŸ’°

**Phase 2ç·ã‚³ã‚¹ãƒˆ**:
- **VPS**: 2,500-3,000å††/æœˆï¼ˆ4GB RAMï¼‰
- **Cloudflare R2**: 300-500å††/æœˆ
- **åˆè¨ˆ**: **2,800-3,500å††/æœˆ**

### VPS vs PaaS æ¯”è¼ƒã¾ã¨ã‚

| é …ç›® | VPSï¼ˆé¸å®šï¼‰ | PaaSï¼ˆVercel + Render + Supabaseï¼‰ |
|-----|-----------|--------------------------------|
| **Phase 1ã‚³ã‚¹ãƒˆ** | 1,000-1,500å††/æœˆ | 0å††/æœˆï¼ˆç„¡æ–™æ å†…ï¼‰ |
| **Phase 2ã‚³ã‚¹ãƒˆ** | 2,800-3,500å††/æœˆ | 5,000-6,000å††/æœˆï¼ˆ$32+ + Cloudflare R2ï¼‰ |
| **ãƒ‡ãƒ¼ã‚¿æ‰€åœ¨åœ°** | æ—¥æœ¬å›½å†… âœ… | ä¸»ã«ç±³å›½ |
| **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·** | ä½ï¼ˆæ—¥æœ¬ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼‰ âœ… | ã‚„ã‚„é«˜ |
| **é‹ç”¨è² è·** | é«˜ï¼ˆã‚µãƒ¼ãƒãƒ¼ç®¡ç†å¿…è¦ï¼‰ | ä½ï¼ˆè‡ªå‹•ç®¡ç†ï¼‰ |
| **æŸ”è»Ÿæ€§** | é«˜ï¼ˆè‡ªç”±ã«æ§‹æˆå¯èƒ½ï¼‰ âœ… | ä¸­ï¼ˆåˆ¶é™ã‚ã‚Šï¼‰ |
| **å­¦ç¿’ã‚³ã‚¹ãƒˆ** | é«˜ï¼ˆLinux/NginxçŸ¥è­˜å¿…è¦ï¼‰ | ä½ |
| **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** | æ‰‹å‹•ï¼ˆVPSå¢—å¼·ï¼‰ | è‡ªå‹• |

**æ±ºå®šç†ç”±**:
- Phase 2ä»¥é™ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼ˆå¹´é–“2-3ä¸‡å††ã®å·®ï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ—¥æœ¬å›½å†…ã§ã®ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼‰
- æŸ”è»Ÿæ€§ï¼ˆã‚«ã‚¹ã‚¿ãƒ è¨­å®šå¯èƒ½ï¼‰
- å­¦ç¿’ä¾¡å€¤ï¼ˆã‚¤ãƒ³ãƒ•ãƒ©çŸ¥è­˜ç¿’å¾—ï¼‰

### Phase 2-3æ‹¡å¼µæ™‚ã®è¿½åŠ æ¤œè¨

- **Redis**ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ï¼‰: VPSä¸Šã«è¿½åŠ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- **WebSocket**ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸï¼‰: Fastify WebSocket
- **Sentry**ï¼ˆã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ï¼‰: $26/æœˆã€œ
- **Grafana + Prometheus**ï¼ˆç›£è¦–ï¼‰: VPSä¸Šã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆç„¡æ–™ï¼‰
- **DockeråŒ–**: å°†æ¥çš„ãªã‚³ãƒ³ãƒ†ãƒŠç®¡ç†å°å…¥

---

## æ¬¡ã‚¹ãƒ†ãƒƒãƒ—

1. **VPSã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**:
   - å›½ç”£VPSå¥‘ç´„ï¼ˆConoHa VPS/ã•ãã‚‰VPSæ¨å¥¨ï¼‰
   - Ubuntu 22.04 LTS ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   - SSHéµèªè¨¼è¨­å®š
   - ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šï¼ˆUFWï¼‰

2. **é–‹ç™ºç’°å¢ƒæ§‹ç¯‰**:
   - Node.jsã€npmã€PostgreSQLã€Nginxã€PM2ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¯ãƒ­ãƒ¼ãƒ³
   - Prismaãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

3. **SSL/TLSè¨­å®š**:
   - ãƒ‰ãƒ¡ã‚¤ãƒ³å–å¾—ãƒ»DNSè¨­å®š
   - Certbot + Let's Encryptè¨­å®š

4. **CI/CDè¨­å®š**:
   - GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä½œæˆ
   - VPS SSHéµç™»éŒ²

5. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºé–‹å§‹**:
   - Prismaã‚¹ã‚­ãƒ¼ãƒå®Ÿè£…
   - èªè¨¼APIå®Ÿè£…
   - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®Ÿè£…

